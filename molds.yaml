knot_3_1-tube:
    load:
        part_fn: knots/knot_3_1-tube-r14d7.obj
        path_fn: knots/knot_3_1-r14.npy
    orient:
        orientation: [0.0, 0.0, 1.0]
    support:
        max_overhang_deg: 45
        smooth_its: 0
    mold:
        thickness: 2.5
    vents:
        height: [15, 15, 15]
        diameter: [3, 3, 3]
        position:
          - [15.616556619157656, -4.453265609389502, 12.607093551910618]
          - [-3.9516371620479225, 15.7509675565233, 12.607093551910646]
          - [-11.664919457109676, -11.297701947133811, 12.607093551910651]
    feed:
        height: 25
        diameter: 3
        n_feeds: 3


# weight: 28.72
# support  deg    wt   pct  time
# mine      45  5.17   18%  2h32m
# slicer    45  5.03   18%  2h33m
knot_3_1-ribbon:
    load:
        part_fn: knots/knot_3_1-ribbon-r14w3,5h7lh0,5.obj
        path_fn: knots/knot_3_1-r14.npy
    orient:
        orientation: [0.0, 0.0, 1.0]  # tilt: 0.0 deg
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 45
    #    smooth_its: 0
    vents:
        height: [15, 15, 15]
        diameter: [3, 3, 3]
        position:
          - [15.219551381238166, -3.9638270402376294, 12.98663409694191]
          - [-4.177000777565625, 15.162431650473588, 12.986634096941938]
          - [-11.042550603672503, -11.198604610236005, 12.986634096941945]
    feed:
        height: 25
        diameter: 3
        n_feeds: 3


# TODO: use a better orientation
knot_4_1-tube:
    load:
        part_fn: knots/knot_4_1-tube-r14d7.obj
        path_fn: knots/knot_4_1-r14.npy
    orient:
        orientation: [0.0, 0.0, 1.0]
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 45
        smooth_its: 0
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [-12.1187847934633, 5.231740070979146, 27.00273502252107]
          - [12.118784793463364, -5.2317400709789155, 27.002735022521083]
    feed:
        height: 25
        diameter: 3
        n_feeds: 2


# TODO: use a better orientation 
knot_4_1-ribbon:
    load:
        part_fn: knots/knot_4_1-ribbon-r14w3,5h7lh0,7.obj
        path_fn: knots/knot_4_1-r14.npy
    orient:
        orientation: [0.0, 0.0, 1.0]
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 45
        smooth_its: 0
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [-11.227033285261301, 3.8268590415803003, 26.887447713188507]
          - [11.227033285261369, -3.8268590415800854, 26.887447713188507]
    feed:
        height: 25
        diameter: 3
        n_feeds: 2


knot_5_1-tube:
    load:
        part_fn: knots/knot_5_1-tube-r14d7.obj
        path_fn: knots/knot_5_1-r14.npy
    orient:
        orientation: [0.0, 0.0, 1.0]
    mold: {}
    support:
        max_overhang_deg: 45
        smooth_its: 0
    vents:
        picked: [0, 1, 2, 3, 4]
    feed:
        n_feeds: 5


# needs a lot of work
knot_5_2-tube:
    load:
        part_fn: knots/knot_5_2-tube-r14d7.obj
        path_fn: knots/knot_5_2-r14.npy
    support:
        max_overhang_deg: 45
        smooth_its: 0
    feed:
        n_feeds: 2


rings:
    load:
        part_fn: models/rings.3mf
        decimated_faces: 10000
        scale: 1000
    orient:
        orientation: [0.0, 0.0, 1.0]  # tilt: 0.0 deg
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 45
    #    smooth_its: 0
    vents:
        height: [10, 10, 10]
        diameter: [2.0, 2.0, 2.0]
        position:
          - [1.0403311252593994, 8.69808578491211, 9.586502075195312]
          - [-8.359623908996582, -3.3882360458374023, 9.58529281616211]
          - [6.905582904815674, -5.429844379425049, 9.583882331848145]
    feed:
        height: 25
        diameter: 2.5
        position:
          - [-2.8365890979766846, -3.1880881786346436, 7.570079326629639]
          - [-1.3383828401565552, 4.044281005859375, 7.570079326629639]
          - [4.17564058303833, -0.8696399331092834, 7.570079326629639]

#
frog:
    load:
        part_fn: models/frog.stl
        decimated_faces: 10000
        #fix: true # TODO: this was being mistakenly ignored, so not actually necessary?
        shell: 5
    orient:
        orientation: [-0.02804067236758134, -0.5273053326188579, 0.849213051527642]  # tilt: 31.9 deg
        n_start: 200
        n_best: 20
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 50
    vents:
        height: [15]
        diameter: [3]
        position:
          - [-1.7037948555119513, -10.03632811529458, 29.46861568476428]
    feed:
        height: 25
        diameter: 3
        position:
          - [-0.7356118, -0.39060886, 25.09205762]

#
cat-40%:
    load:
        part_fn: models/cat_sitting.stl
        decimated_faces: 10000
        simplify: 0.5
        scale: 0.4
        rotate: [0, 0, 180]
    orient:
        orientation: [-0.37860779400207545, -0.5888614098196281, -0.7140716899206422]  # tilt: 135.6 deg
        n_start: 200
        n_best: 20
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 35
    #    style: 3
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [-7.504397869110107, -9.887727737426758, 38.35492706298828]
          - [-4.253547668457031, -28.192913055419922, 24.98311996459961]
    feed:
        height: 25
        diameter: 3
        position:
          - [-16.68870116, -15.78413012, 28.57489695]

#
bunny:
    load:
        part_fn: models/bunny.ply
        decimated_faces: 10000
        #fix: true # TODO: this was being mistakenly ignored, so not actually necessary?
        scale: 500
    orient:
        picked: 1
    mold: {}
    support:
        max_overhang_deg: 45
    vents:
        picked: [0, 3]
    feed:
        position: [-19.74248442694199, -8.929342322662764, 35.05041555047911]

#
bunny-hollow:
    load:
        part_fn: models/bunny.ply
        decimated_faces: 10000
        #fix: true #  # TODO: this was being mistakenly ignored, so not actually necessary?
        scale: 500
        rotate: [90, 0, 180]
        clip: 1.2
        shell: 5
    orient:
        picked: 2
    mold: {}
    support:
        max_overhang_deg: 45
    vents:
        picked: [0, 1, 4, 5]
    feed: {}


# ..finishing up removing
# 4mm feed - worked well, make that the default, try on knots?
# poured at 190, doused with ice water - worked well
duck-hollow:
    load:
        part_fn: models/duck.stl
        decimated_faces: 10000
        #fix: true  # TODO: this was being mistakenly ignored, so not actually necessary?
        rotate: [90, 0, 0]
        shell: {shell: 5, leeway: 2}
    orient:
        orientation: [-0.03947128368890019, 0.5904610883078654, 0.8061003169322299]
        # was bump: [-15, 0]
        # was picked: 1
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 45
    vents:
        height: [15, 15, 15, 15]
        diameter: [3, 3, 3, 3]
        position:
          - [-26.050865715261214, 4.486085655417589, 5.179156825174865]
          - [-1.3257557709319578, 17.864270655059805, 20.084591051918032]
          - [-0.15944082480421218, -9.981606260918184, 21.637728457731665]
          - [24.96328374392116, 4.9516427474278615, 2.9884754553906583]
    feed:
        height: 25
        diameter: 4
        position: [10.255537645198352, 18.52317538259116, 12.625647921608019]

# printed, but had a tall thin tower which nearly failed
# increasing min_support_area to 75 gets rid of that tower, but:
# TODO: try printing with new min_support_area - what will happen where tower used to be?
# poured at 200, doused with fridge-chilled water - good result

# weight: 45.07
# support  deg    wt   pct  time
# mine      45  10.53   23%  3h40m
# slicer    45  12.36   27%  3h53m <-- try this one
# slicer    40  10.27   23%  3h46m
duck-hollow-3mm:
    load:
        part_fn: models/duck.stl
        decimated_faces: 10000
        rotate: [90, 0, 0]
        shell: {shell: 3, leeway: 2}
    orient:
        # was bump: [-15, 0]
        orientation: [-0.03896223955443547, 0.5877942554725232, 0.8080716905834562]  # tilt: 36.1 deg
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 45
    #    min_support_area: 75
    vents:
        height: [15, 15, 15, 15]
        diameter: [3, 3, 3, 3]
        position:
          - [-26.053229715375913, 4.5059934677614795, 5.149900844522687]
          - [-1.3348881024940271, 17.93078566146653, 20.02462462670755]
          - [-0.1724650923654999, -9.909923404601285, 21.67055263813079]
          - [24.962170902569177, 4.9588308966781804, 2.9858510837321193]
    feed:
        height: 25
        diameter: 4
        position: [10.131700450961242, 18.66737269185613, 12.685408965115732]


# TODO: add for_orientation to vents, feed?
# TODO: match section names with step names
# TODO: --debug <section-list>, ditto --force
# TODO: rename feed.picked to feed.position


# a little better than alernative with tilt of 145 deg
# pour at 200 C good
# 2-layer raft really helps with first layer and adhesion
#
# mold: 25.07 g
#
# support  deg    wt     pct  time
# mine           3.31g   13%  2h08m       C: TODO
# slicer    65   10.7g   43%  2h39m       A: removing
# slicer    35    1.8g    7%  2h10m       B: printing
#
butterfly-150:
    load:
        part_fn: models/butterfly.3mf
        decimated_faces: 5000
        scale: 1000
        rotate: [0, 0, 180]
    orient:
        orientation: [0.0, 0.49999999999999983, -0.8660254037844387]  # tilt: 150.0 deg
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 29
    vents:
        height: [15, 15, 15]
        diameter: [2.0, 2.0, 1.5]
        position:
          - [13.201265335083008, 20.702316284179688, 29.30522918701172]
          - [-13.201274871826172, 20.702316284179688, 29.30522918701172]
          - [-0.046859223395586014, 20.443090438842773, 21.626174926757812]
    feed:
        height: 25
        diameter: 3
        position:
          - [0.0007042347997817418, 10.451133841906493, 8.940931952149455]

#
dev:
    load:
        part_fn: models/butterfly.3mf
        decimated_faces: 5000
        scale: 1000
    orient:
        orientation: [0.0, -0.49999999999999983, -0.8660254037844387]  # tilt: 150.0 deg
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 29
    vents:
        height: [15, 15, 15]
        diameter: [2.0, 2.0, 1.5]
        position:
          - [-13.201265335083008, -20.702316284179688, 29.30522918701172]
          - [13.201274871826172, -20.702316284179688, 29.30522918701172]
          - [0.046859223395586014, -20.443090438842773, 21.626174926757812]
    feed:
        position: [-0.0007042347997817418, -10.451133841906493, 8.940931952149455]
        height: 25
        diameter: 3

# weight: 59.92
# support  deg    wt     pct  time
# mine      37  16.57   28%   6h57m
# slicer    45  11.09   19%   6h49m
# slicer    40
cubes:
    load:
        part_fn: models/cubes.3mf
        scale: 1000
    orient:
        orientation: [0.0, 0.0, 1.0]  # tilt: 0.0 deg
    mold:
        thickness: 2.5
    #support:
    #    max_overhang_deg: 37
    vents:
        height: [10, 10, 10]
        diameter: [3, 3, 3]
        position:
          - [-8.000003814697266, -4.618804931640625, 25.98076057434082]
          - [7.999995708465576, -4.618804931640625, 25.98076057434082]
          - [-4.080987309862393e-06, 9.237594604492188, 25.98076057434082]
    feed:
        height: 25
        diameter: 3
        position:
          - [-3.1172525882720947, 0.7538813948631287, 19.075502395629883]
          - [1.9798986911773682, 2.4563794136047363, 19.075502395629883]
          - [0.8214670419692993, -3.125211477279663, 19.075502395629883]

#
flower:
    load:
        part_fn: imported/flower/flower-1.stl
        decimated_faces: 10000
    orient:
        orientation: [0.0, -0.9396926207859084, 0.3420201433256689]  # tilt: 70.0 deg
    mold:
        thickness: 2.5
    support:
        max_overhang_deg: 30
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [6.858763217926025, 4.868526458740234, 38.36460494995117]
          - [-5.834928035736084, 5.51821756362915, 38.600624084472656]
    feed:
        height: 25
        diameter: 3
        position: [0.3438025860271495, -13.263190387774166, 31.739177315405986]

#        
dancer:
    load:
        part_fn: imported/dancer/dancer.stl
        decimated_faces: 20000
    orient:
        orientation: [-0.30002794999298377, 0.6361272378748501, 0.7108624103557041]  # tilt: 44.7 deg
    mold: {}
    support: {}
    vents: {}
    feed: {}

        
# could not get self-generated supports to work:
#     couldn't make support for wings big enough not to fall over
#     trying to make them join main body overflowed everywhere
#     tweaking smoothing, using margin to adjust size did not help
# success with slicer-generates supports:
#     honeycomb (rectilinear nope), 60 deg, 0 contact distance, 2 interface layers (0 nope), pei no glue stick
#     scarf joints helped but slow so trying:
# surface area: 80.8 cm^2 
# support: 31% in addition to mold
angel:
    load:
        part_fn: models/angel-v2.3mf
        scale: 1000
        decimated_faces: 10000
        rotate: [0, 0, 180]
    orient:
        orientation: [0.0, 0.7071067811865476, -0.7071067811865475]  # tilt: 135.0 deg
    mold:
        thickness: 2.5
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [-0.06455576419830322, 14.101720809936523, 37.3082275390625]
          - [0.3407611548900604, -13.66150188446045, 4.4884185791015625]
    feed:
        height: 25
        diameter: 3
        position:
          - [-0.2759025544491239, 23.14814846332899, 28.258688060960154]


# had a failure at tilt 145 on the flat base, so decreased to 140 (closer to angel)
demon:
    load:
        part_fn: models/demon.3mf
        scale: 1000
        decimated_faces: 10000
        rotate: [0, 0, 180]
    orient:
        orientation: [0.0, 0.6427876096865395, -0.7660444431189779]  # tilt: 140.0 deg
    mold:
        thickness: 2.5
    vents:
        height: [15, 15]
        diameter: [3, 3]
        position:
          - [-0.07770422846078873, 10.793128967285156, 38.39266586303711]
          - [-0.06850479543209076, -12.97665786743164, 3.282273054122925]
    feed:
        height: 25
        diameter: 3
        position:
          - [-0.4551653225961337, 21.318463455499668, 29.526637862403522]

#
angel-singing:
    load:
        part_fn: models/angel-singing.3mf
        scale: 1000
        decimated_faces: 10000


REQUIRED:
    load:
        part_fn: REQUIRED
    orient: {}
    mold: {}
    support: {}
    vents: {}
    feed: {}

        
